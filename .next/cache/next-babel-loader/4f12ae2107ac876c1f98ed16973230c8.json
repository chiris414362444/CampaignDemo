{"ast":null,"code":"import React, { Component } from 'react';\nimport Layout from '../../components/Layout';\nimport Campaign from '../../ethereum/campaign';\nimport web3 from '../../ethereum/web3';\nimport ContributeForm from '../../components/ContributeForm';\nimport { Card, Grid, Button } from 'semantic-ui-react';\nimport { Link } from '../../routes';\n\nclass CampaignShow extends Component {\n  static async getInitialProps(props) {\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getSummary().call(); //console.log(summary);\n\n    return {\n      address: props.query.address,\n      minimunContribute: summary[0],\n      balance: summary[1],\n      requestCount: summary[2],\n      approvalCount: summary[3],\n      manager: summary[4]\n    };\n  }\n\n  renderCards() {\n    const {\n      address,\n      minimunContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      manager\n    } = this.props;\n    const items = [{\n      header: manager,\n      meta: '管理者地址',\n      description: '创建当前众筹的管理者，并且是众筹的受益人。',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: minimunContribute,\n      meta: '最小贡献量',\n      description: '当前众筹支持投资的最小金额。',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: requestCount,\n      meta: '请求数量',\n      description: '当前管理者创建请求从合约中提前，必须要大于50%的投资人同意。',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: approvalCount,\n      meta: '投资人数量',\n      description: '已经为当前众筹投资的投资人数量。',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: web3.utils.fromWei(balance, 'ether') + ' ETH',\n      meta: '当前众筹总金额',\n      description: '当前众筹剩余的金额。',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }];\n    return React.createElement(Card.Group, {\n      items: items\n    });\n  }\n\n  render() {\n    return React.createElement(Layout, null, React.createElement(\"h1\", null, \"\\u4F17\\u7B79\\u5217\\u8868\"), React.createElement(Grid, null, React.createElement(Grid.Row, null, React.createElement(Grid.Column, {\n      width: 10\n    }, this.renderCards()), React.createElement(Grid.Column, {\n      width: 6\n    }, React.createElement(ContributeForm, {\n      address: this.props.address\n    }))), React.createElement(Grid.Row, null, React.createElement(Grid.Column, null, React.createElement(Link, {\n      route: `/campaigns/${this.props.address}/requests`\n    }, React.createElement(\"a\", null, React.createElement(Button, {\n      primary: true\n    }, \"\\u67E5\\u770B\\u8BF7\\u6C42\")))))));\n  }\n\n}\n\nexport default CampaignShow;","map":{"version":3,"sources":["/Users/chrisyx/Documents/BlockChain/Campaign/pages/campaigns/show.js"],"names":["React","Component","Layout","Campaign","web3","ContributeForm","Card","Grid","Button","Link","CampaignShow","getInitialProps","props","campaign","query","address","summary","methods","getSummary","call","minimunContribute","balance","requestCount","approvalCount","manager","renderCards","items","header","meta","description","style","overflowWrap","utils","fromWei","render"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,MAArB,QAAmC,mBAAnC;AACA,SAASC,IAAT,QAAqB,cAArB;;AAEA,MAAOC,YAAP,SAA4BT,SAA5B,CAAsC;AACpC,eAAaU,eAAb,CAA6BC,KAA7B,EAAoC;AAClC,UAAMC,QAAQ,GAAGV,QAAQ,CAACS,KAAK,CAACE,KAAN,CAAYC,OAAb,CAAzB;AACA,UAAMC,OAAO,GAAG,MAAMH,QAAQ,CAACI,OAAT,CAAiBC,UAAjB,GAA8BC,IAA9B,EAAtB,CAFkC,CAGlC;;AACA,WAAO;AACLJ,MAAAA,OAAO,EAAEH,KAAK,CAACE,KAAN,CAAYC,OADhB;AAELK,MAAAA,iBAAiB,EAAEJ,OAAO,CAAC,CAAD,CAFrB;AAGLK,MAAAA,OAAO,EAAEL,OAAO,CAAC,CAAD,CAHX;AAILM,MAAAA,YAAY,EAAEN,OAAO,CAAC,CAAD,CAJhB;AAKLO,MAAAA,aAAa,EAAEP,OAAO,CAAC,CAAD,CALjB;AAMLQ,MAAAA,OAAO,EAAER,OAAO,CAAC,CAAD;AANX,KAAP;AAQD;;AAEDS,EAAAA,WAAW,GAAG;AACZ,UAAM;AACJV,MAAAA,OADI;AAEJK,MAAAA,iBAFI;AAGJC,MAAAA,OAHI;AAIJC,MAAAA,YAJI;AAKJC,MAAAA,aALI;AAMJC,MAAAA;AANI,QAOF,KAAKZ,KAPT;AASA,UAAMc,KAAK,GAAG,CACZ;AACEC,MAAAA,MAAM,EAAEH,OADV;AAEEI,MAAAA,IAAI,EAAE,OAFR;AAGEC,MAAAA,WAAW,EAAE,uBAHf;AAIEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB;AAJT,KADY,EAOZ;AACEJ,MAAAA,MAAM,EAAEP,iBADV;AAEEQ,MAAAA,IAAI,EAAE,OAFR;AAGEC,MAAAA,WAAW,EAAE,gBAHf;AAIEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB;AAJT,KAPY,EAaZ;AACEJ,MAAAA,MAAM,EAAEL,YADV;AAEEM,MAAAA,IAAI,EAAE,MAFR;AAGEC,MAAAA,WAAW,EAAE,iCAHf;AAIEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB;AAJT,KAbY,EAmBZ;AACEJ,MAAAA,MAAM,EAAEJ,aADV;AAEEK,MAAAA,IAAI,EAAE,OAFR;AAGEC,MAAAA,WAAW,EAAE,kBAHf;AAIEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB;AAJT,KAnBY,EAyBZ;AACEJ,MAAAA,MAAM,EAAEvB,IAAI,CAAC4B,KAAL,CAAWC,OAAX,CAAmBZ,OAAnB,EAA4B,OAA5B,IAAuC,MADjD;AAEEO,MAAAA,IAAI,EAAE,SAFR;AAGEC,MAAAA,WAAW,EAAE,YAHf;AAIEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB;AAJT,KAzBY,CAAd;AAiCA,WAAO,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAIL;AAArB,MAAP;AACD;;AAEDQ,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,MAAD,QACE,2DADF,EAEI,oBAAC,IAAD,QACE,oBAAC,IAAD,CAAM,GAAN,QACA,oBAAC,IAAD,CAAM,MAAN;AAAa,MAAA,KAAK,EAAE;AAApB,OACM,KAAKT,WAAL,EADN,CADA,EAIE,oBAAC,IAAD,CAAM,MAAN;AAAa,MAAA,KAAK,EAAE;AAApB,OACE,oBAAC,cAAD;AAAgB,MAAA,OAAO,EAAG,KAAKb,KAAL,CAAWG;AAArC,MADF,CAJF,CADF,EASE,oBAAC,IAAD,CAAM,GAAN,QACE,oBAAC,IAAD,CAAM,MAAN,QACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAG,cAAa,KAAKH,KAAL,CAAWG,OAAQ;AAA9C,OACE,+BACE,oBAAC,MAAD;AAAQ,MAAA,OAAO;AAAf,kCADF,CADF,CADF,CADF,CATF,CAFJ,CADF;AAwBD;;AAtFmC;;AAyFtC,eAAeL,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport Layout from '../../components/Layout';\nimport Campaign from '../../ethereum/campaign';\nimport web3 from '../../ethereum/web3';\nimport ContributeForm from '../../components/ContributeForm';\nimport { Card, Grid, Button } from 'semantic-ui-react';\nimport { Link } from '../../routes';\n\nclass  CampaignShow extends Component {\n  static async getInitialProps(props) {\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getSummary().call();\n    //console.log(summary);\n    return {\n      address: props.query.address,\n      minimunContribute: summary[0],\n      balance: summary[1],\n      requestCount: summary[2],\n      approvalCount: summary[3],\n      manager: summary[4]\n    };\n  }\n\n  renderCards() {\n    const {\n      address,\n      minimunContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      manager\n    } = this.props;\n\n    const items = [\n      {\n        header: manager,\n        meta: '管理者地址',\n        description: '创建当前众筹的管理者，并且是众筹的受益人。',\n        style: { overflowWrap: 'break-word' }\n      },\n      {\n        header: minimunContribute,\n        meta: '最小贡献量',\n        description: '当前众筹支持投资的最小金额。',\n        style: { overflowWrap: 'break-word' }\n      },\n      {\n        header: requestCount,\n        meta: '请求数量',\n        description: '当前管理者创建请求从合约中提前，必须要大于50%的投资人同意。',\n        style: { overflowWrap: 'break-word' }\n      },\n      {\n        header: approvalCount,\n        meta: '投资人数量',\n        description: '已经为当前众筹投资的投资人数量。',\n        style: { overflowWrap: 'break-word' }\n      },\n      {\n        header: web3.utils.fromWei(balance, 'ether') + ' ETH',\n        meta: '当前众筹总金额',\n        description: '当前众筹剩余的金额。',\n        style: { overflowWrap: 'break-word' }\n      }\n    ];\n\n    return <Card.Group items = {items}/>;\n  }\n\n  render() {\n    return(\n      <Layout>\n        <h1>众筹列表</h1>\n          <Grid>\n            <Grid.Row>\n            <Grid.Column width={10}>\n                { this.renderCards() }\n              </Grid.Column>\n              <Grid.Column width={6}>\n                <ContributeForm address={ this.props.address }/>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column>\n                <Link route={`/campaigns/${this.props.address}/requests`}>\n                  <a>\n                    <Button primary>查看请求</Button>\n                  </a>\n                </Link>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n      </Layout>\n    )\n  }\n}\n\nexport default CampaignShow;\n"]},"metadata":{},"sourceType":"module"}